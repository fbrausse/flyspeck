% 
% Author: Thomas C. Hales
% Affiliation: University of Pittsburgh
% email: hales@pitt.edu
%
% latex format

% History.  File started Oct 7, 2012
% Course notes for Math 2501, Algebra 2, University of Pittsburgh.
% Exam format


\documentclass{llncs}
\pagestyle{headings} 
\usepackage{verbatim}
\usepackage{graphicx}
\usepackage{amsfonts}
\usepackage{amscd}
\usepackage{amssymb}
\usepackage{amsmath}


\usepackage{alltt}
\usepackage{rotating}
\usepackage{floatpag}
 \rotfloatpagestyle{empty}
\usepackage{graphicx}
\usepackage{multind}\ProvidesPackage{multind}
\usepackage{times}

% my additions
\usepackage{verbatim}
\usepackage{latexsym}
\usepackage{crop}
\usepackage{txfonts}
\usepackage[hyphens]{url}
\usepackage{setspace}
\usepackage{ellipsis} % 
% http://www.ctan.org/tex-archive/macros/latex/contrib/ellipsis/ellipsis.pdf 

\usepackage{amsfonts}
\usepackage{amsmath}
%tikz graphics
%\usepackage{xcolor} % to remove color.
\usepackage{tikz} % Needs pgf version >= 2.10.
\usetikzlibrary{chains,shapes,arrows,shadings,trees,matrix,positioning,intersections,decorations,
  decorations.markings,backgrounds,fit,calc,fadings,decorations.pathreplacing}
% fonts

% fonts
\usepackage[mathscr]{euscript} % powerset.
\usepackage{pifont} %ding
\usepackage[displaymath]{lineno}
\usepackage{rotating}

% theorems
%\newtheorem{problem}{Problem}

% Math notation.
\def\op#1{{\hbox{#1}}} 
\def\tc{\hbox{:}}
%\newcommand{\ring}[1]{\mathbb{#1}}
\def\amp{\text{\&}}
\def\bq{\text{\tt {`}\,}}
\def\true{\text{true}}
\def\false{\text{false}}
\def\princ#1{\smallskip\hfill\break\smallskip\centerline{\it #1\hfill}}
\def\l{<}
% Flags

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\input{../../kepler_tex/flag}
\input{../../kepler_tex/kepmacros}



% svn propset svn:keywords "LastChangedRevision" groebner.tex
\def\svninfo{{\tt
  filename: groebner.tex\hfill\break
  PDF generated from LaTeX sources on \today; \hfill\break
  Repository Root: https://flyspeck.googlecode.com/svn \hfill\break
  SVN $LastChangedRevision: 2901 $
  PGF version: $\pgftypesetversion$
  }
  }
%-%

\def\verbose{f}

\begin{document}

\title{Course Notes on Gr\"obner bases}
\author{Thomas C. Hales}
\institute{University of Pittsburgh\\
\email{hales@pitt.edu}}
\maketitle

\def\ra{\rightarrow}
\def\ras{\rightarrow^*}
%\def\da{\downarrow}
\def\LT{\op{LT}}

This document contains supplementary course notes on Gr\"obner bases for Math 2501 (a second semester graduate course in Abstract Algebra at the University of Pittsburgh).  These notes are based on Dummit and Foote's {\it Abstract Algebra} and Harrison's {\it Handbook of Practical Logic and Automated Reasoning}.


\section{Terminating and Confluent Relations}


If $(\ra)$ is a relation on a set $X$, then $(\ras)$ means the reflexive transitive closure of $(\ra)$; that is, the intersection of all reflexive transitive relations that contain $(\ra)$.  
A relation $(\ra)$ on a set $X$ is {\it terminating}, if there are no infinite sequences $f_1\ra f_2\ra \cdots$.
An element $f\in X$ is
{\it reduced} if there does not exist $g$ such that $f\ra g$.
We say that $g$ is a {\it rewrite} of $f$ if $f\ra g$.


Given a relation $(\ra)$ on a set $X$, we say that $f, g\in X$ are {\it joinable} if there exists $h$ such that $f\ras h$ and $g\ras h$.
A relation $(\ra)$ is {\it confluent} if whenever we have $f\ras g_1$ and $f\ras g_2$, then $g_1$ and $g_2$ are joinable.  The relation is {\it weakly confluent} if whenever we have
$f\ra g_1$ and $f\ra g_2$, then $g_1$ and $g_2$ are joinable.  

Newman's lemma asserts that if a relation that is terminating and weakly confluent, then it is confluent.  In practical terms, it means that to check confluence of a terminating relation, it is enough to check the easier condition of weak confluence.   

\begin{problem}\label{p1}  Let $\ra$ be a terminating and weakly confluent relation on $X$.
Let $Y\subset X$ be the set of elements $f$ that satisfy the confluence condition: for all $g_1$ and $g_2\in X$,
if $f\ras g_1$ and $f\ras g_2$, then $g_1$ and $g_2$ are joinable.  
Let   $f\in X$ have the property that for all $g\in X$, if $f\ra g$, then $g\in Y$.   
Show that $f\in Y$.
\end{problem}

\begin{problem} Use Problem~\ref{p1} to prove Newman's lemma.
\end{problem}

\section{Polynomial Relations}

We use the following notation.   Let $k$ be a field, and let $R=k[x_1,\ldots,x_n]$ be the polynomial ring in $n$ variables with coefficients in $k$.  Let $I$ be an ideal of $R$.  We generally use $F$ for a subset of $I$.  Let $\ring{N}=\{0,1,\ldots\}$.

The multi-degree of $x_1^{a_1} x_2^{a_2} \cdots x_n^{a_n}$ is $(a_1,\ldots,a_n)\in \ring{N}^n$.
We write $\op{md}:R\to \ring{N}^n$ for the multi-degree.

We fix an ordering $\l$ on variables; for example $x_n < x_{n-1} < \cdots < x_1$.  We put a well-ordering $(<)$ on $\ring{N}^n$ (viewed as the multi-degrees)  first by ordering
by total degree $a_1+\cdots+a_n$, then lexicographically among those elements with the same total degree (using the ordering of variables).

Each nonzero $f\in R$ can be uniquely written as a sum of nonzero monomials with distinct multi-degrees.  Each nonzero $f$ has a leading term $\LT(f)=\ell$, being that monomial term of $f$ with largest multi-degree (w.r.t. well-ordering).  We write $f = \ell - r$, where $-r$ is the sum of the remaining monomial terms.


Let $F\subset R$ be a set of polynomials.  We define a relation $(\ra_F)$ on $R$ as follows.
We write $f \ra_F g$ to mean that $f$ and $g$ are identical, except that some monomial term $m$ of $f$ of the form $m=m' \ell$ has been replaced with $m' r$ in $g$, for some
$\ell-r\in F$, where as usual $\ell$ is the leading term of $\ell-r$.
For example, if $F = \{x^2 + xy - 1\}$, and if $x$ is the largest variable,
we have $\ell=x^2$ and $r= - x y +1$. We then
have
\[
x^7 + y^3 + x^3 y = x^5 x^2 + y^3 + x^3 y \ra_F x^5 (- x y + 1) + x^3 y = -x^6 y - x^5 + x^3 y
\]
and
\[
x^6 + y^3 + x^3 y = x^7 + y^3 + x y (x^2) \ra_F x^6 + y^3 + x y (-x y + 1) = x^6 + y^3 - x^2 x^2 + x y.
\]
We drop the subscript $F$ on $(\ra_F)$, when the context makes $F$ clear.

Since $m' \ell - m' r = m'(\ell-r)\in (F)$ (the ideal generated by $F$), 
whenever $f\ra g$, then $f- g\in (F)$.
In other words, the relation $f \ra_F g$ simplifies the coset representative
$f+(F) = g + (F)$.  Similarly, by an easy induction, $f\ras_F g$ implies $f - g \in (F)$.

\begin{problem}
Show that for any set $F\subset R$, the relation $(\ra_F)$ is terminating.
\end{problem}

\section{Characterizations of Gr\"obner bases}

We say that a set $F\subset R$ is a {\it Gr\"obner basis} (GB for short)
of the ideal $(F)$ it generates if $(\ra_F)$ is confluent.  What this means is that every element of $R$ has a uniquely determined reduced form with respect to the relation $(\ra_F)$.

\begin{lemma} Let $F$ be a subset of $R$ with rewrite relation $(\ra)$.  
The following are equivalent.
\begin{enumerate} 
\item $F$ is a GB of $(F)$; that is, $F$ is confluent.
\item $\forall f$.~  $f\ras 0$ iff $f\in (F)$.
\item $\forall f,g$.~ $f$ and $g$ are joinable iff $f-g\in (F)$.
\end{enumerate}
\end{lemma}


\begin{proof}
$(1\Rightarrow 2)(\Rightarrow)$:  It was observed above that for any set $F$,
$f\ras_F g$ implies $f - g\in (F)$.  Take $g=0$.

\begin{problem}  Prove the implication
$(1\Rightarrow 2)(\Leftarrow)$:  If $F$ is a GB of $(F)$ and if $f\in (F)$, then $f\ras 0$.
\end{problem}

$(2\Rightarrow 3)(\Rightarrow)$:  Assume (2) and that $f$ and $g$ are both joinable to some $h$.  Then $f-h\in (F)$ and $g-h\in (F)$.  So $f-g\in (F)$.

$(2\Rightarrow 3)(\Leftarrow)$:  Assume (2) and that $f-g\in F$.  We use a ``separation ofmonomials argument.''   By (2), $f-g\ras 0$.  Expand out the sequence of rewrites on monomials of $f-g$ keeping separate the rewrites on monomials in $f$ and monomials in $g$, never combining terms between the $f$ and the $g$ side of the ledger.  In the end, $f$ has been rewritten to $h$; that is $f\ras h$.  Since $f-g\ras 0$, we find that $g$ must have been rewritten to the same polynomial $h$; that is $g\ras h$.  This means that $f$ and $g$ are joinable.

$(3\Rightarrow 1)$:  Assume condition (3).  We prove confluence of $F$.  Let $f\ras g_1$ and $f\ras g_2$.  Then $f-g_1\in (F)$, $f-g_2\in (F)$, and taking differences $g_1-g_2\in (F)$.  By (3), we have that $g_1$ and $g_2$ are joinable.  This proves confluence.\qed
\end{proof}

\section{$S$-polynomial}

Let $F\subset R$.
Let $f_1=\ell_1-r_1$ and $f_2=\ell_2-r_2$ be elements in $F$ with leading terms $\ell_i$.
let $m$ be the least common multiple of $\ell_1$ and $\ell_2$; that is,
$m = m_1\ell_1 = m_2\ell_2$.  Set 
\[
S(f_1,f_2) = m_1 f_1 - m_2 f_2 = m_1 r_1 - m_2 r_2.
\]
Note that if $f_1,f_2\in F$, then $S(f_1,f_2)\in (F)$.

\begin{lemma}[Buchberger's criterion] In this context, $F$ is a GB
of $(F)$ iff $S(f_1,f_2)\ras  0$ for all $f_1,f_2\in F$.
\end{lemma}

\begin{proof}
$(\Rightarrow)$: If $F$ is a GB, and if $f_1,f_2\in F$, then $S(f_1,f_2)\in (F)$ and by
the equivalent conditions of the previous section, we have $S(f_1,f_2)\ras 0$.

The other direction is left as an exercise.
\qed\end{proof}

\begin{problem} Use Newman's lemma to prove the implication
$(\Leftarrow)$ in Buchberger's criterion.
\end{problem}



\section{Existence of Gr\"obner bases}

\begin{lemma}  Let $I$ be an ideal of $R$.  Then $I$ has a GB.
\end{lemma}

\begin{proof}  A finite set $F_0$
of generators of $I$ exists
by Hilbert's basis theorem.  

Compute $S(f,g)$ for $f,g\in F_0$ and reduce each $S$-polynomial as much as possible with respect to $(\ra_{F_0})$.  If no nonzero reduced element can be obtained, then by Buchberger's criterion $F_0$ is a GB, and we're done.  Otherwise let $h_0\ne 0$ be obtained from some $S$ by reduction as far as possible and
set $F_1 = F_0\cup \{h_0\}$.  Note that since $f,g\in F_0\subset I$, we also have $h_0\in I$, so that $F_0$ and $F_1$ generate the same ideal.

Now iterate the procedure of the previous paragraph either to produce at some stage a GB, or failing that, an infinite sequence
\[
F_0 \subset F_1 \subset F_2 \cdots.
\]

We claim that the infinite sequence is impossible and hence that the procedure must terminate.  
Corresponding to an infinite sequence is a sequence of ideals
\[
J_0 \subset J_1 \subset J_2 \subset \cdots
\]
where $J_i$ is the ideal generated by leading terms of the elements of $F_i$.
We have $\op{LT}(h_i) \not\in J_i$, for otherwise we can rewrite using $F_i$ on the leading term of $h_i$, which is contrary to our assumption that $h_i$ is reduced.  Hence, sequence of ideals is a strictly increasing sequence.  This contradicts Hilbert's basis theorem.
\qed
\end{proof}

\section{Equivalence Definition of Gr\"obner basis}

If $X\subset R$, let $\LT_X = \{\op{LT}(f) \mid f\in X\}$, the set of leading terms.
As usual, $(\LT_X)$ denotes the ideal generated by $\LT_X$.

\begin{lemma} Let $I$ be an ideal of $R$ and let $F$ be a subset of $I$.
Then $F$ is a GB of $I$ if and only if $(\LT_I) = (\LT_F)$.
\end{lemma}

\begin{proof}
$(\Leftarrow)$:  First we show that $F$ generates $I$.  Suppose
for a contradiction that  $f\in I\setminus (F)$.  We may assume that $f$
is minimal in the sense that that multi-degree of the leading term $m$ of $f$ is as
small as possible.  Since $(\LT_I) = (\LT_F)$,
$m = \sum_i m_i \LT(f_i)$, for some monomials $m_i$ and some $f_i\in F$.
Equating monomial terms on the two sides, we have $m = c m_j \LT(f_j)$ for some
$f_j\in F$ and some scalar $c\in k$.  Thus, $f$ can be rewritten at its leading term via $f_j$ to get 
$f\ra g\in I\setminus (F)$, where $g$ has smaller leading term.  This contradicts
the minimality of $f$ and shows that $I=(F)$.

By equivalent conditions on GB, it is enough to show that $f\ras 0 $
for all $f\in (F)$.  The argument is identical to the previous paragraph, replacing
the condition $f\in I\setminus (F)$ with the conditon: $f\in (F)$ and $f\not\ras 0$.

\begin{problem}
$(\Rightarrow)$: Prove the contrapositive:  Assuming the existence 
$f\in (\LT_I)\setminus (\LT_F)$,
show that $F$ is not a GB of $I$.
\end{problem}
\qed
\end{proof}

\section{Minimal Gr\"obner basis}

We are aiming for the uniqueness statement of a reduced GB.  To help us get there, we introduce minimal GB.
A GB $F$ of $(F)$ is {\it minimal} provided
\begin{enumerate}
\item the leading term of every $f\in F$ is monic, and
\item for every $f\in F$, the leading term of $f$ is not divisible by the leading term 
of any other $g\in F$.
\end{enumerate}

\begin{lemma} Every ideal $I$ has a minimal GB
\end{lemma}

\begin{proof}  Among all GBs of $I$ in which every leading term is monic, 
pick one of smallest cardinality.  We claim it is minimal.  
Otherwise $\LT(f_2)$ divides $\LT(f_1)$ for some distinct $f_1,f_2\in F$.  Let $G=F\setminus\{f_1\}$.  Then
\[
(\LT_{G}) = (\LT_F) = (\LT_I),
\]
which exhibits $G$ as a GB of smaller cardinality.
\qed
\end{proof}

\begin{lemma}  Any two minimal GBs of $I$ have the same distinct leading terms (and the same cardinality).
\end{lemma}

\begin{problem} Supply the proof of this lemma.
\end{problem}


\section{Reduced Gr\"obner basis}

A GB $F$ of $(F)$ is said to be reduced, provided
\begin{enumerate}
\item  the leading term of every $f\in F$ is monic, and
\item  for every $f\in F$, no monomial term of $f$ is divisible by the leading term of a distinct $g\in F$.
\end{enumerate}

A reduced GB is in particular a minimal GB.

\begin{lemma} Every ideal $I$ has a reduced GB
\end{lemma}

\begin{proof}
Start with any minimal GB $F_0$.  If $\LT(f)$, $f\in F_0$, 
divides a (nonleading) monomial $m$ of $g\in F_0$, then 
replace $g$ with $h$, where $g\ra h$
is obtained by rewriting $g$ at the monomial $m$ via $f$.   Let $F_1$ be obtained by adding $h$ to and removing $g$ from $F_0$.  The leading terms are unchanged so
\[
(\LT_I) = (\LT_{F_0})=(\LT_{F_1})
\]
and this shows that $F_1$ is again a minimal GB  Upon interation, 
this process must terminate
by the well-ordering of monomials.  The terminal set $F_k$ is a reduced GB
\qed
\end{proof}

\begin{lemma}  The reduced GB of an ideal is unique.
\end{lemma}

\begin{proof}  Let $F=\{f_1,\ldots\}$ and $G=\{g_1,\ldots\}$ 
be two reduced GBs of an ideal $I$. We index the two bases by increasing
leading term.  By the uniqueness for minimality $\LT(f_i)=\LT(g_i)$ for all
$i$.  The rest of the proof is left as an exercise.\qed
\end{proof}


\begin{problem} Complete this proof.
\end{problem}


We remark that the reduced GB is unique given the ordering on variables fixed
at the beginning of these notes.   A different ordering on variables will give a different
reduced GB

\end{document}



