% Author Thomas C. Hales
% Copyright Thomas C. Hales
% Format latex.
% 

%!TEX TS-program = latex    
%% This line is for TexShop. 

% Revision history. See svn.
% Jan 24, 2009

\documentclass[cup9a]{cupbook}
%% Cambridge University Press Macros from
%% https://authornet.cambridge.org/information/productionguide/laTex_files/

%

\usepackage{graphicx}
\usepackage{verbatim}
\usepackage{latexsym}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{makeidx}
\usepackage{multicol}
\usepackage{crop}
\usepackage{txfonts}
%\usepackage{pdfsync}  %for TexShop sync.
\usepackage[letterpaper,colorlinks=true,
            ps2pdf,hyperindex=true]{hyperref}
%\usepackage{mparhack} %http://www.tex.ac.uk/cgi-bin/texfaq2html?label=marginparside
\usepackage{multind}


\input{macros}
%\makeindex{guid}

 \crop
%\makeindex



% CUP BOOK CLASS SPECIFIC
\newtheorem{lemma}{Lemma}[chapter]
\newtheorem{definition}{Definition}[chapter]
\newtheorem{remark}{Remark}[chapter]
\newtheorem{theorem}{Theorem}[chapter]
\newtheorem{corollary}{Corollary}[chapter]
\newtheorem{example}{Example}[chapter]
\newtheorem{claim}{Claim}[chapter]
\newtheorem{notation}{Notation}[chapter]
\newtheorem{assumption}{Assumption}[chapter]
\newtheorem{interpretation}{Interpretation}[chapter]

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}
\raggedbottom  % for now.
%\raggedright  % don't worry for now.

    \title{The Foundations of Mathematics :
      %\\ \phantom{Hello}
      \\  An Introductory Course in Higher Order Logic}
    \author{Thomas C. Hales}
    \maketitle
    \frontmatter
    \tableofcontents
    \thanks

\mainmatter

\input{frontmatter}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%  \label{part:intro}
   \newpage

   \setcounter{chapter}{-1}
   \chapter{Preface}
   \label{XX}  % for missing references. XX.

   \chapter{Overview} 

   What are the foundations of mathematics?  First of all, we need a {\it language} in which mathematics can be expressed precisely.  Then, we need {\it rules of logic} that allow us to reason about mathematics.  Finally, we need {\it axioms}, which are statements that are accepted without proof.  Axioms give us a starting point for our logical reasoning.

  The foundational system can be expanded upon, by adding additional definitions, theorems, and proofs.

\section{Why do we need foundations?}

\subsection{consistency}

Frege devoted his life to the development of a logically coherent mathematical system.  His system was shattered in 1900 when B. Russell discovered an inconsistency in Frege's system.  

Here is Russell's paradox.  In Frege's system, it may be possible for a set to be an element of itself.  When this holds we write $Y\in Y$.  When it is not an element of itself, write $Y\not\in Y$.   We define $X$ to be the set of all sets $Y$ such that $Y\not\in Y$.  That is,
    $$X = \{Y\mid Y\not\in Y\}.$$
We ask, whether $X$ is an element of itself.    If $X\in X$, then $X$ satisfies the membership condition $Y\not\in Y$ to belong to $X$;  that is, $X\not\in X$.
If on the other hand $X\not\in X$, then $X$ does not satisfy the membership condition $Y\not\in Y$ to belong to $X$; that is, $X\in X$.  So $X$ is a member of itself, if and only if it is not a member of itself.  This is a contradiction in Frege's system.

\subsection{settle disputes}

Sometimes arguments arise about whether a proof is correct or not.  The problem is usually that the proof has been written in a way that is far from the foundations of mathematics.  By reworking the proof to make its connection with the foundations more transparent, the dispute can generally be resolved.

\subsection{unification of mathematics}

Different branches of mathematics can be seen from a unified perspective from the foundations of mathematics.  Calculus, analysis, differential equations, algebra, group theory, topology, geometry, applied mathematics, etc. can be all be treated as part of a coherent whole, unified by the foundations.

\subsection{formal proofs}

It has become possible in recent years for computers to check every step of mathematical proofs.  A computer-checked proof is called a {\it formal proof}.  The computer systems that check proofs in this way must be based on the foundations of mathematics.

\section{various systems}

There are many foundational systems of mathematics that have been developed.

\subsection{Zermelo set theory}

Russell's paradox prompted mathematicians to develop a consistent system of axioms for doing mathematics.  Most foundational systems are based on set theory.  A system of axioms for doing set theory 
was developed by the mathematician Zermelo in 1908.   This is Zermelo set theory.  This book does not go into details about Zermelo set theory, but we will have occasion to use it.  An appendix covers basic properties of Zermelo set theory.

Later Zermelo set theory was supplemented in various ways.  The mathematician Fraenkel added one more axiom to the system (called the axiom of replacement).  One further axiom (the axiom of choice) was added.  Zermelo set theory, supplemented by these two further axioms, is called Zermelo-Fraenkel-Choice set theory; or simply ZFC set theory.

\subsection{Bourbaki}

In the 1940s a group of French mathematicians banded together under the pseudonym, General Nicholas Bourbaki.  They developed a system of set theory, and gave a careful description of major branches of mathematics within a coherent framework.  Bourbaki has come to represent an approach to mathematics which is abstract, general, and systematic.

\subsection{Higher Order Logic}

This book develops a system of higher-order logic for a foundational system.  The origins of this system can be traced to the work of Alonzo Church.  We will not say more about it now, because the entire book will be devoted to developing this system.

\subsection{others}


In fact, there have been many different foundational systems that have been proposed over the past decades.  There is nothing to stop anyone from proposing a new system of axioms for doing mathematics.


\section{How to choose?}

\subsection{analogy}

What foundational system should we use?

We face a similar question when we purchase a computer.  What computer should we buy?  Different computer run different operating systems, such as UNIX, Linux, Windows, or Mac OS X.  Some become fanatical about what brand is best or what operating system is best.  Others go with whatever other people seem to be using.

No matter what computer or operating system we decide upon, we expect it to have certain basic capabilities.  It should have a web browser.  It should be capable of reading the hard drive, and downloading files.  It should be possible to edit documents and to print files.  It should be possible to set up user accounts.

We can make analogous statements about a foundational system.  There are
many products to choose from (Zermelo, Bourbaki, Higher-Order Logic, etc).  Some people may become fanatically devoted to a particular system and others may go with whatever others seem to be using.  No matter what system we choose to use, it should have certain basic capabilities.  It should be possible to do basic logic.  It should be possible to develop the properties of standard number systems such as the natural numbers, rational numbers, and real numbers.  It should be possible to do calculus, analysis, algebra, topology, and geometry within the system.  Applied mathematics should be possible.  it should be possible to do calculations in an efficient way.

\subsection{Why HOL}

To be honest, I am fanatically devoted to the foundational system in this book.  I hope to convince some of my readers why I find this particular system so appealing.  However, the most popular system among mathematicians in ZFC.  This is largely a result of historical developments, rather than any compelling reason.  The ZFC system has the first-to-market advantage.  Zermelo developed his system first and has retained a large marked share through the decades.



\section{immersion}

Again, we start with an analogy.  Learning a foundational system is like learning a foreign language.  In a foreign language course, you can either learn by immersion or through your native language.  

In an immersion course, you jump into the water and sink or swim, without using your native langauge.  Suppose you are learning Japanese.  In an immersion course, neither the teacher nor you speak a word of English inside the classroom.  You learn the meanings of Japanese words by gestures, pantomimes, and grunts.  An infant learns a language by immersion.  

By contrast, when a language is taught by means of the speakers native language, two languages are spoken in the classroom.  If a native English speaker learns Japanese, both English and Japanese are spoken in the classroom.  English is spoken to instruct how to speak Japanese.   The langauge being acquired is called the target language.  The language used to give instruction is called the meta language.  In this example, English is the instructional langage or meta language, and Japanese is the target language.  (We could also teach English to Japanese students in which English is the target language and Japanese is the meta language.)  Once the student has reached a certain stage in the study of Japanese, it is natural to exclude English from the classroom, and to do everything in Japanese.

We face a similar situation when we learn a new foundational system in mathematics.  The immersion approach is not successful.  It is not really possible to teach advanced mathematics by gestures, pantomimes, and grunts.  We will use a two language system.  We will assume that the reader of this book already has an informal knowledge of mathematics.  We will use that informal system to describe the new langauge.  We will have a meta mathematics (which is the instructional mathematical language), and a target mathematics (which is the new mathematical system we are learning).  
Just as it is important not to confound English with Japanese, it is important not to confound the meta mathematical system with the target system.

This book uses Zermelo set theory as the metamathematical system.  I made this choice, because I assume that it is the most familiar to the readers of this book.  We only need to use simple properties of Zermelo set theory that are summarized in an appendix.  The target mathematical system is Higher Order Logic (HOL).  

In mathematics, there is a greater danger of confounding the metamathematical system with the target mathematical system, because some of the symbols will be the same in both systems.  For example, the natural number $0$ will exist as both a set in Zermelo set theory and as a term in Higher Order Logic.   Or convention will be to distinguish terms Higher Order Logic with backquotes and special fonts.  For example, {\tt `0`} denotes the term in Higher-Order Logic and $0$ is the corresponding thing in Zermelo set theory.

We use the terms metalanguage, metalogic, and metamathematics to refer to the familiar informal language, logic, and math that is being used to construct the system of Higher Order Logic.  We use the terms HOL language, HOL logic, and HOL mathematics to refer to the new foundational system of Higher Order Logic. 


\chapter{Basic Notation}

\section{natural numbers}

The book assumes an elementary knowledge of the theory of sets.  The set of greatest interest to us is the set of natural numbers:
$$
\ring{N}=\{0,1,2,3,4,5,\ldots\}.
$$
Wars are fought over questions such as whether the natural numbers should start with $0$ or $1$.  In this book, we always start with $0$.

\section{strings}

\subsection{characters}

This book will need to be concerned with ways in which the letters of the alphabet and other symbols are arranged into mathematical formulas.   To do this precisely, we need to say (in mathematically precise terms) what a letter of the alphbet is.  In set theory, it is the practice to find a way of expressing all mathematical objects as sets.   For that reason, we find a way to describe letters of the alphabet as sets.  This can be done using the ASCII representation of letters.  ASCII is a code for expressing letters of the alphabet as numbers.

For each letter of the English alphabet and a number of other symbols, there is a corresponding natural number, called its ASCII code.  
(To find the complete table, google ASCII table.)

$$
\begin{array}{lll}
'A' & 65\\
'B' & 66\\
'C' & 67\\
\ldots & \ldots\\
'Z' & 90\\
\ldots & \ldots\\
'a' & 97\\
'b' & 98\\
\ldots & \ldots\\
'z' & 122\\
\end{array}
$$

The exact values do not concern us.  What matters is that we have a bijection between the following characters and a subset of $\ring{N}$. 
$$
 \hbox{A\ B\ C\ D\ E\ F\ G\ } \ldots
$$
From our point of view, each character is a natural number.  No distinction will be made between a character and the number 'A' = 65, etc.
Note that we distinguish between upper and lower case characters:
'A' $= 65\ne 97 =$ 'a'.
Let $L$ be this finite set of natural numbers.

\subsection{strings}

A {\it string} is a function from $\{0,1,2,\ldots,n-1\}$ to $L$ for some
natural number $n$.  (We follow the convention that when $n=0$, the domain
is the empty set.)  The number $n$ is called the length of the string.

We introduce the following notation for strings:  a sequence of characters terminated on both ends by a double quote represents a string.  For example,
``ABC'' is the function $f:\{0,1,2\}\to L$ that takes the following values:
$$
f(0) = 'A'  = 65;\quad f(1) = 'B' = 66; \quad f(2) = 'C' = 67.
$$

Example: ``HELLO'' is the string of length 5 that takes the following
values, determined by the ASCII table:
$$
f(0) = 'H'  = 72;\quad f(1) = 'E' = 69; \quad f(2) = 'L' = 76;
\quad f(3) = 'L' = 76; \quad f(4) = 'O' = 79.
$$

We let $L+$ denote the set of all strings whose length is at least $1$.


\section{notation}

\subsection{prefix}

Generally, a function is written before the input to the argument:
$f(x)$ indicates the value of a function $f$ that has been evaluated
at an element $x$ of its domain.  This is called {\it prefix} notation
because the function $f$ appears before the element $x$.  

\subsection{postfix}

When the function is written after the input, as in $x f$ for the value of the function on the input $x$, it is called postfix notation.  We will generally avoid this notation.

\subsection{infix}

Finally, if the function is a function of two variables $x$ and $y$, and the function symbol is written between the two variables, it is called {\it infix} notation.  This appears as $x\,f\, y$.    The infix notation often appears with functions that have symbolic names, such as addition of natural numbers.  The function is written in infix position:
  $$x + y.$$

Here are some examples of infix operators.
$$
3+4,\ 7\times 8,\ 10/2,\ 4 - 3,\ 2 < 7,\ 8\ge 6,\ X\subset Y, \hbox{ and } \ x\in A.
$$

There are times when we wish to convert infix notation into prefix.  To do so, we place parentheses around the infix function.   For example
$$
x + y
$$
is a notational variant of
$$
(+)~x~y.
$$
Following this convention, we have the following notation variants:
$$
\begin{array}{lll}
\hbox{prefix} & \hbox{infix}\\
(+)~3~4 & 3 + 4\\
(/)~10~2 & 10/2\\
(\ge)~8~6 & 8 \ge 6\\
(\times)~7~8 & 7\times 8\\
\end{array}
$$

To say that we have a notational variant means that the two expressions denote precisely the same thing.  


\subsection{right associative}

If $*$ is an infix operator, then $a * b * c$ is ambiguous.  It can mean
either $(a* b)*c$ or $a*(b*c)$.  One way to resolve the ambiguity is to insert the parentheses.  Another way to resolve the ambiguity is to declare the infix operator to  be right-associative or left-associative.  If an operator is
declared to be right associative then the parentheses are inserted from the right:
$$
a*b*c*d = a*(b*(c*d)),\quad \hbox{right associative}
$$
An infix operator declared to be left-associative requires the parentheses to be inserted from the left:
$$
a*b*c*d = ((a*b)*c)*d.\quad \hbox{left associative}
$$






The distinction between prefix, infix, and postfix can be made at both the mathematical level and at the metamathematical level.  The same holds of right-associative and left-associative.

\chapter{Basic Zermelo Set Theory}

This appendix gives a review of basic set theory.  We only present enough set theory to make sense of the metamathematical constructions in this book.

\section{natural numbers}

We let $\ring{N}=\{0,1,2,3,\ldots\}$ be the set of natural numbers.  We let $L$ denote a finite subset of $\ring{N}$ that will be called the alphabet.  Also, $L+$ is the set of all finite strings of length at least $1$ formed from the alphabet.



\section{set notation}

The set with no elements is called the {\it empty set} and is denoted $\emptyset$ or $\{\}$.

A set of the form $\{a\}$ is called a {\it singleton set}.  It is a set that contains exactly one element $a$.

\subsection{extensionality}

We write $x\in A$ to mean that $x$ is {\it an element of} $A$.  A set can be imagined as a sort of container that contains elements.  The {\it axiom of extensionality} for sets asserts that two sets are equal if and only if they contain the same elements:
   $$(A = B)\hbox{ if and only if } \forall x.\ (x\in A) \Leftrightarrow (x\in B).$$
For example,
   $$\{1,2,3,4,4,3,2,2,2,2,1\} = \{4,3,2,1\}$$
because $x$ is an element of either set precisely when $x=1,2,3$, or $4$.
Since they contain the same elements, they are equal.  The order of listing and the repetitions do not matter.

Two sets are distinct if the nesting of braces is different.
For example,
$$
\{\},\quad \{\{\}\},\quad \{\{\{\}\}\},\quad \{\{\},\{\{\}\}\}
$$
are all different sets from one another.  The first is the empty set.
The second is a set with one element.  That element is the empty set.
The third is a set with one element.  That element is the second set in the list.  The final set contains two distinct elements: the empty set and the singleton set with the empty set as its only element.  Think of sets like these as highly organized sets of empty containers.

\subsection{comprehension}

If $A$ is a set, we write
$$
\{x \in A \mid P(x)\}
$$
for the set of all elements in A that satisfy the property $P$.
For example,
$$
\{x\in\ring{N} \mid x > 3\} = \{4,5,6,7,\ldots\}.
$$



We write $A\subset B$ to mean that every element of $A$ is an element of $B$.

We write $A\cap B$ for the set of all elements that belong to both $A$ and $B$:
$$
A\cap B = \{x \mid x\in A\hbox{ and } x \in B\}.
$$
The set $A\cap B$ is called the {\it intersection} of $A$ and $B$.
We write $A\cup B$ for the set of all elements that belong to either $A$ or $B$:
$$
A\cup B = \{x\mid x\in A\hbox{ or } x\in B\}.
$$
The set $A\cup B$ is called the {\it union} of $A$ and $B$.
For example, if $A=\{1,2,3\}$ and $B = \{3,4\}$, then
$$
A\cap B = \{3\},\quad A\cup B = \{1,2,3,4\}.
$$

\subsection{powerset}

Given any set $X$, there is a set $P(X)$, called the {\it powerset} of $X$ whose elements are  all the subsets of $X$:
$$
P(X) = \{x\mid (x\in P(X))\Leftrightarrow (x\subset X)\}.
$$
For example, if $X = \{1,2,3\}$, then $P(X)$ is the following set with
$2^3 = 8$ elements:
$$P(X) = \{\emptyset, \quad \{1\},\{2\},\{3\},\quad
          \{1,2\},\{2,3\},\{1,3\},\quad \{1,2,3\} \}.$$


Zermelo's axioms of set theory insure that $A\cup B$, $A\cap B$, $P(X)$ always exist.

\subsection{ordered pairs}

Given any $x$ and $y$, there is a set $(x,y)$ called the ordered pair
of $x$ and $y$.  It has the property that $(x,y)=(a,b)$ if and only if
$$
x = a \quad \hbox{ and } y = b.
$$
Given any sets $X$ and $Y$, there is a set $X \times Y$ called the Cartesian product of $X$ and $Y$, consisting of all ordered pairs whose first element belongs to $X$ and second element belongs to $Y$:
$$
X\times Y  = \{(x,y) \mid x\in X\hbox{ and } y \in Y\}.
$$
For example, if $X = \{0,1\}$ and $Y=\{2,3\}$, then
$$
X\times Y = \{\{0,2\},\{0,3\},\{1,2\},\{1,3\}\}.
$$

\subsection{curried functions}

We write $Y^X$ for the set of all functions from $X$ to $Y$.  In other
words, $Y^X$ is the set of all functions with domain $X$ and range $Y$.
In Zermelo set theory, there is a bijection of sets between
\begin{equation}
  Z^{X\times Y}\hbox { and } (Z^Y)^X.\label{eqn:curry}
\end{equation}
That is, there is a bijection between functions with domain is the Cartesian product $X\times Y$ and range $Z$ on the one hand, and functions whose domain is $X$ and range is the set of functions from $Y$ to $Z$ on the other hand.
(Notice the formal similarity with the law of exponents for natural numbers:
$z^{x y} = (z^y)^x$.)

It may seem odd at first that the range of a function is a set of functions, but this will happen quite routinely in this book.

The bijection is given explicity as follows.  If $b:X\to Z^Y$ is a function
on the right-hand side of (\ref{eqn:curry}), then let $f_b:X\times Y\to Z$
be the function given by 
$$
f_b(x,y) = b(x) (y).
$$
In the other direction, if $a:X\times Y\to Z$ is a function on the left-hand side of (\ref{eqn:curry}), then let $h_a:X\to Z^Y$ be given by
$$
h_a(x) = (y\mapsto a(x,y)).
$$
Note that $h_a(x)$ is a function from $Y$ to $Z$.
It can be  checked that $a\mapsto h_a$ and $b\mapsto f_b$ are inverse functions of one another and give the bijection asserted in (\ref{eqn:curry}).
That is,
$$
f_{h_a} = a,\hbox{ and } h_{f_b} = b.
$$

This bijection will be extremely important for the developments in this book.  The right-hand side of the bijection (\ref{eqn:curry}) is called the curried form of the function.  The left-hand side of the bijection (\ref{eqn:curry}) is called the uncurried form of the function.  (The name comes from the logician Haskell Curry.)   In the vast majority of all situations, we prefer to use the curried form of the function.  We prefer curried functions in both the metamathematical system and the HOL mathematical system.

As an example, let us analyze addition of natural numbers.  The addition operator in uncurried form takes an ordered pair $(x,y)$ and
returns the sum $x+y$.   Now consider addition as a curried function and analyze the expression $3+4$.  For example, we can write this in curried prefix notation as
$$
(+)~3~4.
$$
Curried addition is a function in $(\ring{N}^{\ring{N}})^{\ring{N}}$.  The domain
is the set of natural numbers and the range is a function from $\ring{N}$ to $\ring{N}$.
That is $(+)~3$ is a function from $\ring{N}$ to $\ring{N}$.  This function is the function that adds $3$; that is, $(+)~3 = (y\mapsto y+3)$.  We apply the
the function that adds $3$ to $4$ and the result is $7$.

Explained somewhat differently, the uncurried function takes everything at once and the curried function takes its inputs one at a time.  We can take $(3,4)$ together and return the sum $7$ in uncurried form.  In curried form, we can take $3$, then take a pause or even a long siesta before taking the $4$, finally returning the $7$.  In curried form, we can even stop entirely before evaluating the function $(+)~3$ on the second summand, and leave it in this form as the function that adds $3$.

\subsection{unwrapping the exponents}

We have introduced the notation $(Z^Y)^X$ for the set of functions with domain $X$ and range $Z^Y$.    If $b$ is such a function, we can write it
$b:X\to Z^Y$ to indicate its domain $X$ and range $Z^Y$.  When we take
$b(x)$ we get a function $Y\to Z$.  If we unwrap the exponents, we
take an element of $X$ then an element of $Y$ to get an element of $Z$.
Thus, it is natural to write
$$
b:X\to Y\to Z\quad \hbox{ or }\quad  b:X\to (Y\to Z)
$$
to indicate the domain and range of $b$.  The expression on the left
says we take $x\in X$ then $y\in Y$ and return $z\in Z$.  On the
right, we take $x\in X$ then return a function $Y\to Z$.

Because of this example, we adopt the convention that the arrow $\to$
is to be right associative:
$$
X\to Y \to Z = X\to (Y\to Z).
$$
The uncurried form of a function $b:X\to Y\to Z$ is $f_b:(X\times Y)\to Z$.
If we want to use a function $c$ whose domain is $Y^X$ and range is $Z$,
the parentheses must be inserted explicitly: $c:(X\to Y)\to Z$.

\subsection{parentheses}

The convention is to drop the parentheses on curried functions when this can be done without ambiguity.  For example, curried prefix addition is written
$$
(+)~x~y
$$
rather than any of the following forms:
$$
(+)(x)(y)\quad ((+)(x))(y)  \quad (((+)(x))(y)).
$$
These forms are correct, but contain unnecessarily many parentheses.
In this example, the parentheses are needed around the $(+)$ to make it
a prefix operator rather than an infix operator. All other parentheses may
be dropped.

\subsection{recursion}








\end{document}
