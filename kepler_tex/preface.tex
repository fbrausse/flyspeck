%------------------------------------------------------------
% Author: Thomas C. Hales
% Format: LaTeX
% Book Chapter: Dense Sphere Packings
%------------------------------------------------------------

\chapter*{Preface}


%{
%
%\narrower
%
%{\it ``A personality which has been veiled by a formal method
%  throughout many chapters is suddenly seen face to face in the
%  Preface.'' }
%% Introductory note, p3, Famous Prefaces, Harvard Classics, Vol
%% 39. P.F. Collier & Son, 1910.
%
%}

%\bigskip

%\centerline{\it ``Those who justify themselves do not convince.''
%  --Lao-Tzu}
%% quoted in Watts's essay in "Modern Buddhism" ed. Donald Lopez,
%% page 160


{

\narrower

{\it

  ``I think there's a revolution in mathematics around the corner. I
  think that~\dots{}   %in later times
  people will look back on the fin-de-siecle of the twentieth century
  and say `Then is when it happened' (just like we look back at the
  Greeks for inventing the concept of proof and at the nineteenth
  century for making analysis rigorous). I really believe that. And it
  amazes me that no one seems to notice\dots.

  ``Never before have the Platonic mathematical world and the physical
  world been this similar, this close. Is it strange that I expect
  leakage between these two worlds? That I think the proof strings
  will find their way to the computer memories?\dots 

  ``What I expect is that some kind of computer system will be
  created, a proof checker, that all mathematicians will start using
  to check their work, their proofs, their mathematics. I have no idea
  what shape such a system will~\dots{}  take. But I expect some
  system to come into being that is past some threshold so that it is
  practical enough for real work, and then quite suddenly some kind of
  `phase transition' will occur and everyone will be using that
  system.''

{\hfill\rm--Freek Wiedijk~\cite{FWR}} % http://www.cs.ru.nl/~freek/jordan/index.html

}

}

\newpage

{

\narrower\parindent=0pt
\parskip=0.4\baselineskip

{\it

Alecos: Christos has a problem with the `foundational quest'!

Christos:  Wrong!  I have two problems with your  {\rm {version}} of it!  One, it
didn't fail and, two, it wasn't a tragedy!  Granted, there are some tragic
parts!  But the ending is happy, as in the `Oresteia'!  

Apostolos:  Happy for whom?  Cantor, going insane?  G\"odel starving himself to
death out of paranoia? Hilbert or Russell and their psychotic sons? Or Frege with--

Christos: `The meaning
is in the ending!' you said so yourself!  So, follow the quest for ten more years and
you get a brand-new triumphant finale with the creation of the computer, which is the
quest's real hero!   Your problem is, simply, that you see it as a story of people!

Apostolos: Well, stories do tend to be about people!

Christos:  So, choose the right people!  And show what they really did!  All we we learn
of the great von Neumann is he said `It's over'  when he heard G\"odel!

Alecos: But it was over in a sense, wasn't it?  Pop went Hilbert's `no ignorabimus'!

Christos:  But then came the quest's jeune premier, its parsifal~\dots{}  Alan Turing!
He said `Ok, we can't prove everything! So, let's see what we can prove!' and to define
proof, he invented, in 1936, a theoretical machine which contains all the ideas of the
computer!\dots{}  which, after the war, he and von Neumann, the quest's proudest sons,
brought to full life!

{\hfill\rm--Doxiadis and Papadimitriou, ~~Logicomix~\cite{Logicomix}} % page 303.

}

}




\newpage

{

\narrower\parindent=0pt
\parskip=0.4\baselineskip

{\it

``Ever hear of the Kepler Conjecture?''

``Nope.''

I laid the notebook on the table and flipped through the pages. ``It was first stated
in 1611 by Johannes Kepler,'' I said.  ``Kepler became interested in the problem while
he was corresponding with an Englishman named Thomas Harriot, who was trying
to help his friend Sir Walter Raleigh figure out the best way to stack cannonballs on ship
decks.  The goal was to find the densest possible spherical arrangements~\dots{}  basically,
the way grocers stack oranges''

``Okay,'' he said, nodding.

``Kepler's conjecture {\rm{seems}} perfectly sound,'' I said.

``That is does,'' Ben said.

``But here's the thing\dots.   I looked it up and discovered that, in 1998, a proof
had finally been put forward by an American mathematician named Thomas Hales.  In 2003,
a committee that had been assigned to verify Hales's work confirmed that they were ninety-nine
percent certain of the proof's correctness.  But that one percent was key.  The mathematical
world is still waiting for the publication of the data that will prove the Kepler Conjecture definitively.''

``Sucks for Thomas Hales,'' Ben said.

``I agree.  But it makes sense that they have to be certain, doesn't it?''


{\hfill\rm--Michelle Richmond, No One You Know~\cite{Richmond}} % page 177.

}

}

%%DD Figure of cannonballs.

\bigskip

{

\narrower\parindent=0pt
\parskip=0.4\baselineskip

{\it

``Sometimes fixing a 1 percent defect takes 500 percent effort.''

{\hfill\rm-- Joel Spolsky, Joel on Software~\cite{Spolsky}} % page 122

}

}

\bigskip

{

\narrower\parindent=0pt
\parskip=0.4\baselineskip

{\it

``Every one fully persuaded is a fool.''

{\hfill\rm-- Barthasar Graci\'an, the Art of Worldly Wisdom~\cite{Gracian}} % p110

}

{

\it

%Believe not everything, but only what is proven: the former is foolish, 
%the latter the act of a sensible man. 

%{\hfill -- Democritus}

}

}



\newpage

\section*{The Kepler Conjecture}

In 1611, Johannes Kepler wrote a booklet in which he asserted that the familiar
cannonball arrangement of congruent balls in space achieves the
highest possible density.  This assertion has become known as the
Kepler conjecture.  This book presents a proof.

As early as 1831, Gauss established a special case of the conjecture,
by proving that the cannonball arrangement is optimal among all
\newterm{lattices}~\cite{Gau31}.  Later in the nineteenth century,
Thue solved the corresponding problem in two dimensions, showing that
the hexagonal arrangement of disks in the plane achieves optimal
density~\cite{Thu92}, \cite{Thu10}.  Hilbert, in his famous list of
mathematical problems, made the Kepler conjecture part of his eighteenth
problem.  In 1953, Fejes T\'oth formulated a general strategy to
confirm the Kepler conjecture, but lacked the computational resources
to carry it out~\cite{Fej53}.  The conjecture was finally resolved in
1998, even though the full proof was not published until
2006~\cite{Hales:2006:DCG}.  Section~\ref{sec:history} gives
additional historical background.

The Kepler conjecture has become a test of the capability of computers to
deliver a reliable mathematical proof.  The original proof 
involved many long computer calculations that
exhausted the efforts of a team of referees.  This book has
 redesigned the proof in a way that makes the correctness of
the computer proof as transparent as possible.


\section*{Formal Proofs}

After all is said and done, a proof is only as reliable as the
processes that are used to verify its correctness.  The ultimate
standard of proof is a formal proof, which is nothing other
than an unbroken chain of logical inferences from an explicit set of
axioms.  While this may be the mathematical ideal of proof, actual
mathematical practice generally deviates significantly from the ideal.



%More than ten years have passed since a proof was first
%obtained. Why give a new presentation of the proof?
%
%The original proof was not widely understood.  The complexity was not
%because of conceptual challenges.  In fact, the proof makes only
%modest demands on the theoretical training of the reader.  It is
%possible to read and understand the proof with a knowledge of a
%limited body of mathematics, such as basic calculus and elementary
%Euclidean geometry.
%
%Nevertheless, the proof involves many long calculations. Even worse,
%it it relies on computer calculations.  An error in any calculation or
%a bug in the computer code has the potential to topple the entire
%proof.
%
%The referees were conscientious and checked many of the calculations.
%However, for the most part, the computer code lay beyond the scope of
%referee review, and even careful quality control can let a
%occasional bug slip through undetected.
%
%After all is said and done, no proof is more reliable than the
%reliability of the processes that are used to verify its
%correctness.  These processes include the checking that the author
%makes before releasing the proof for public scrutiny, the checking
%of the referees, and the checking done by readers after publication.

In recent years, as part of this project, I have been increasingly preoccupied by the
processes that mathematicians rely on to ensure the correctness of complex
proofs. A century ago, Russell's paradox and other antinomies threatened
 set theory  with fires of destruction.
Researchers from Frege to G\"odel solved the problem of
rigor in mathematics and found a theoretical solution but did not
extinguish the fire at the foundations of mathematics
because they omitted the practical implementation. Some, such as
Bourbaki, have even gone so far as to claim that ``formalized
mathematics cannot in practice be written down in full'' and call
such a project
``absolutely unrealizable'' \cite[pp.~10--11]{Bour:68:Sets}. % Theory of
                                                          % Sets, page
                                                          % 10,11.

While it is true that formal proofs may be too long to print,
computers -- which do not have the same limitations as paper -- have
become the natural host of formal mathematics. In recent decades,
logicians and computer scientists have reworked the foundations of
mathematics, putting them in an efficient form designed for real use
on real computers.

For the first time in history, it is possible to generate and verify
every single logical inference of major mathematical theorems.  This
has now been done for many theorems, including the four-color theorem, the prime number
theorem, the Jordan curve theorem, the Brouwer fixed point theorem,
and the fundamental theorem of calculus.  Freek Wiedijk
reports that 83\% of a list of one hundred famous theorems have now been
checked formally \cite{wiedijk:100}.  The list of seventeen remaining
theorems contains two particular challenges: the independence of the
Continuum Hypothesis and Fermat's Last theorem.
% list as of 5/5/2010.

Some mathematicians remain skeptical of the process because computers
have been used to generate and verify the logical inferences.
Computers are notoriously imperfect, with flaws ranging from software
bugs to defective chips.  Even if a computer verifies the inferences,
who  verifies the verifier, or then verifies the verifier of the
verifier?  Indeed, it would be unscientific of us to place an
unmerited trust in computers.

The choice comes down to two competing verification processes.  The
first is the traditional process of referees, which depends largely on
the luck of the draw -- some referees are meticulous, while others are
careless.  The second process is formal computer verification, which
is less dependent on the whims of a particular referee.  In my view,
the choice between the conventional  process by human referee and computer
verification is as evident as the choice between a sundial and an atomic
clock in contemporary science.

The standard of proof I have adopted is the highest scientific
standard available by current technology.  
%That standard, which
%continues to evolve with the advancement of technology, is formal
%verification by computer.
%The boundary that separates an easy proof from a difficult
%one shifts with current technology.  
The introduction of steel in
architecture is not a mere reinforcement of wood and stone; it changes
the world of structural possibilities.  There is no longer any
reason to limit proofs to ten-thousand-pages when our
technology supports a million pages.

The style of formal proofs is different from that of conventional
ones.  It is easier to formalize several short snappy proofs
than a few intricate ones.  Humans enjoy surprising new perspectives,
but computers benefit from repetition and standardization.  Despite
these differences, I have sought  proofs that might bring
pleasure to the human reader while providing precise instructions for
the implementation in silicon.

\section*{Conventions}

To make formalization proceed more smoothly, long proofs have been
broken into a series of smaller claims.  Each claim starts a new paragraph
and is set in italics.  The second sentence of the paragraph begins with
the word \newterm{indeed} when the proof of the claim is direct and with
the word \newterm{otherwise} when the proof is indirect by contradiction.

The pronoun \newterm{we} is used inclusively for the author and reader as
we work our way through the proofs in this book.  The pronoun \newterm{I} 
refers to the author alone, as in the first sentence of the following section.

The asterisk $\wild$ is used as a wildcard symbol in patterns.  It
replaces a term in contexts where the name of the term is not
relevant.  It can also denote a bound variable.  For example, the
function $f(\wild,y)$ of a single variable is obtained from $f$ by
evaluating the second argument at a fixed value $y$.

The union of the family $X$ of sets is written as $\bigcup\ X$ or as
$\bigcup_{x\in X} x$ without any difference in meaning.  The first form
is preferred because of its economy.  We also use both expressions
$\bigcap\ X$ and $\bigcap_{x\in X} x$ for the intersection of a family of sets.

The documentation of the computer calculations for the Kepler
conjecture has evolved over time.  The 1998 preprint version of the
proof of the Kepler conjecture contains long appendices of doubtful
value that list hundreds of calculations that enter into the proof.
These appendices were cut from the published version of the proof
because it is more useful to store the computer part of the proof at a
computer code repository that is permanent, versioned, and freely
available.  The computer code and documentation are housed at
\newterm{Google Code project hosting}.  A separate guide, which is
available at the project site, describes the computer calculations
that appear in this book.  When this book uses an external
calculation, it is marked in italic font as a \cc{This explains notation}.

\section*{A Blueprint}

I dream of a fully formally verified solution to the packing problem.
This project is still unfinished, but significant progress is being
made.  The book is a blueprint for formal proofs because it gives the
design of the formal proof to be constructed.  Decisions about what to
include in this book have been shaped by the list of theorems already
available in the library of the proof assistant \newterm{HOL Light}.
For example, this book accepts basic point-set topology and measure
theory because they have been formalized by Harrison~\cite{HOLL}.


The book is divided into four parts, the first of which
 describes the major ideas, methods, and
organization of the proof.  

%There is an essay on each major computer
%component of the proof. The purpose is to provide a panoramic view of
%proof, to provide intuition about proof strategies.  After reading
%this part of the book, the reading should understand what the proof is
%all about, without yet dipping into technical details.

The part on foundations provides background material about
constructions in discrete geometry.  The first of these chapters
covers trigonometric identities and basic vector geometry.  The second
treats volume from an elementary point of view.  The third chapter
covers planar graph theory from a purely combinatorial perspective.
The fourth chapter continues with planar graphs, now from a geometric
perspective.

The next part of the book gives the solution to the packing problem.
The first chapter  gives a top-level overview of the major
steps of the proof,   describing how the problem can be reduced from
a problem with infinitely many variables to one in finitely many
variables.  The remaining chapters in this part flesh out the proof.

The final part of the book views dense sphere packings from a larger perspective.
One chapter resolves some other longstanding conjectures in
discrete geometry: Bezdek's strong dodecahedral conjecture and Fejes
T\'oth's full contact conjecture.  Another chapter describes  formal proof, 
the HOL Light proof assistant, and the Flyspeck formalization project.
An appendix  gives an introduction  to the methods used in the computer calculations.

\section*{Simplifications}

Many simplifications of the original proof have been found over the
past several years.  These simplifications are published here for the
first time.  Gonthier has reworked the proof of the four-color
theorem to avoid the use of the Jordan curve theorem, using instead
the much simpler notion of M\"obius contour from the theory of
hypermaps.  I have followed Gonthier's lead.

The optimality of the face-centered cubic packing is an assertion
about infinite space-filling packings.  For computational purposes, it is
useful to reduce the sphere packing problem to finite packings.  A
\newterm{correction term} is associated with each different reduction from
infinite packings to finite packings.  Ferguson and I worked together to
find the original proof of the Kepler conjecture.  The two of us considered a
large number of different correction terms, seeking one that
would simplify the computations as much as possible.  In a discussion
of the solution of the packing problem, I wrote that ``correction
terms are extremely flexible and easy to construct, and soon Samuel
Ferguson and I realized that every time we encountered difficulties in
solving the minimization problem, we could adjust $f$ [the correction
term] to skirt the difficulty\dots.  If I were to revise the proof
to produce a simpler one, the first thing I would do would be to
change the correction term once again.  It is the key to a simpler
proof''~\cite{Hales:2000:cannonballs}.  Marchal has recently found a remarkably simple 
correction term, giving a new way  to  reduce from infinite packings
to finite packings~\cite{marchal:2009}.  This book implements his reduction step.

There are many other improvements of the proof that are not visible in
the book because they are implemented in computer code, including
a reduction of  the number of lines of computer code from over 187,000
to well under 10,000.  Needless to say, the quickest way to verify that a block
 of computer code is free of bugs is to delete the code altogether.




\bigskip
\hbox{}



\bigskip
\hbox{}

{
\parindent=0pt
\obeylines

Thomas C. Hales
Pittsburgh, PA
May 2010

}







