% DCG Kepler Errata
% Author: Thomas C. Hales
% Affiliation: University of Pittsburgh
% email: hales@pitt.edu
%
% latex format

% History:
% May 1, 2007
% Dec 18, 2007, Long deformation fix. 
% New Inequalities marked HYPOTHESIS.


\documentclass[11pt]{amsart}
\usepackage{graphicx}
\usepackage{amsfonts}
\usepackage{amscd}
\usepackage{amssymb}
\usepackage{alltt}

% version
\def\ver{~Dec. 18, 2007}

% Math notation.
\def\op#1{{\text{#1}}}
\newcommand{\mc}[1]{{\mathcal{#1}}}
\newcommand{\ring}[1]{\mathbb{#1}}
\def\to{{\quad\Longrightarrow\quad}}
\def\line{$\ell$}
\def\text{\hbox}

\parindent=0pt
\parskip=\baselineskip

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

\title{Errata and Revisions for ``The Kepler Conjecture''}

\author{Thomas C. Hales}
\email{hales@pitt.edu}
\address{Math Department, University of Pittsburgh}


\maketitle

\section{Introduction}


\subsection{Relation between the Abridged and Unabridged Versions}

The abridged version of the Kepler conjecture
in the Annals \cite{A}
was generated by the same tex
files as the unabridged version in \cite{DCG}.


There are a few differences in wording that
were required between the two versions.
These are formatting
differences, different naming
conventions for the sections and subsections,
different conventions for references and citations,
and so forth.
The two articles also carry minor differences
in wording of transitional phrases that
accommodate the slightly different organizational
structure of the two documents.  A simple
tex macro was used to generate the occasional passage
that differs.

Because of the way these documents were produced
from the same tex files,
it seems that nearly every correction to
the abridged version will also be a correction to the unabridged version.
(So far, no errors have been found that are
unique to the abridged version.)
For that reason, we list the errata for the
unabridged version. The same list applies to corresponding 
passages in the abridged version.  




\subsection{Format}

Each correction gives its location in \cite{DCG}.
The location
\line+n counts down from the top of the page, or
if a section or lemma number is provided, it
counts from the top of that organizational unit.
The location \line-n counts up from the bottom
of the page. Footnotes are not included in the
count from the bottom.  Every line containing
text of any sort is included in the count,
including displayed equations, section headings,
and so forth.


\section{Errata}

[p.47,Lemma~5.16]
	$$
	Q \to F
	$$

[p.49,\line+2]
        $$
        \text{supposed} \to \text{suppose}
        $$
        
	
[p.63,Lemma~7.10]
	$$
	{\mathcal S}-system \to Q-system
	$$
	
[p.73][p.124] Theorem~8.4 is stated for entire
standard cluster, but is applied to a group of
three simplices in Lemma~11.27.   A similar
problem may exist with other applications of
Theorem~8.4.  FIX: restate Theorem~8.4 in
sufficient generality to cover all cases.
(The proof is based on a much finer decomposition
into pieces.  Because of the structure of
the proof, it the result holds with much
weaker hypotheses than what is stated.)

[p.75,Remark~8.11]
	$$
	\text{show} \to \text{shows}
	$$

[p.78,\line-7]
      $$
      \text{constraints} \to \text{constraint}
      $$

[p.86,\line+14]
        $$
        \text{Let $\{0,v\}$ be 
          the diagonal of an upright quarter in the $Q$-system}
        $$

        $$
        \to
        \text{Let $v$ be a vertex with $2t_0<|v|<\sqrt8$.}
          $$
	
          Remark: Section~9 assumes that the diagonal belongs to
          a quarter in the $Q$-system, but Lemma~10.14 uses these
          results when $\{0,v\}$ has $0$ or $1$ anchors.  To make
          this coherent, we should assume throughout Section~9 that
          we have the weaker condition that whenever $\{0,v\}$ has
          two or more anchors it belongs to a quarter in the $Q$-system.
          The proofs of Section~9 all go through in this context.
          (Lemma~9.7 is all that is relevant here.)

[p.87,Definition~9.3]
	In definition of $\Delta(v,W^e)$, we
	can have some $Q$ (as in Fig~9.1)
	with negative orientation.
	In this case, $E_v\cap E_i$ can clip
	the other side.  We want the object
	without clipping, so the definition must
	be modified slightly to reflect this.
	
[p.88,Definition~9.6]
	The definition is poorly worded.  First of
	all, it requires that the subscript to
	$\epsilon$ should be a vertex, but then in
	the displayed equation, it makes $w/2$ the
	subscript, which needn't be a vertex.  To
	define $\epsilon'$, move from $w/2$ along
	the ray through $x'$ until an edge of the
	Voronoi cell is encountered.  If $v,w,u$
	are the three vertices defining that edge,
	then set $\epsilon'_v(\Lambda,x)=u$.
	Degenerate cases, such as when two different
	edges are encountered at the same time,
	can be resolved in any reasonable fashion.
	
[p.88,Lemma~9.7,\line+2] 
	$$
	w\text{ and } v\to w \text{ and } u
	$$
	
[p.88,Lemma~9.7,Claim~1]
	$$
	\text{ with } |w - w'|\le 2t_0, \text{ and }
	\to \text{ with }
	$$
	
[p.88,Lemma~9.7,\line+5]
         Then: $\to$

        \narrower{Let
          $$
          R'_w = \{x\in R_w \cap(0,\{u,w\})\mid 
          \epsilon_0(x,\{u,w\}) = u.
          $$  
          Assume that $R'_w$ is not empty. Then:}


(This new hypothesis is satisfied
        in every application of Lemma~9.7.
        We note that this forces the orientation of $\{0,v,w'\}$ to
        be negative in $Q=\{0,v,w',u\}$, which in turn forces $Q$
        to be a quarter.)

[p88,Lemma~9.7,Claim~3]
        $$
        R_w \to R'_w
        $$

        (This weaker claim is all that is ever needed in applications
        of Lemma~9.7.)

[p.89,\line+2]
	$$
	\{w,v\}\to\{w,u\}
	$$

[p.92,\line+16]
        $$
        \max_j u_j \to \max_j |u_j|
        $$

[p.92,\line+21]
        $$
        \max_j u_j \to \max_j |u_j|
        $$
	
[p.93,\line-4]
	$$
	\text{obstructed from }w \to
	\text{obstructed from }w'
	$$
	
	
[p.93,\line-3] This is not an error, but we
	can cite one Lemma rather than three:
		$$
		\begin{array}{lll}
		\text{barrier} &\to \text{upright barrier}\\
		\text{Lemmas~9.8, 9.10, and 9.11} &\to
		\text{Lemma~9.11}
		\end{array}
		$$
		
[p.93,\line-2]
	$$
	\text{from some} \to \text{for some}
	$$

[p.99,\line+1]
        $$
        \text{start} \to \text{star}
        $$

[p.105,Lemma~10.14]  In the proof of the cases involving
   $0$ or $1$ anchor, a combination of the decompositions from
   Section~8.4 and Section~9 are used.  These decompositions haven't
   been shown to be compatible.  
   FIX: It is better to combine
   $\Delta(v,W)$ with $t_0$-truncation on the rest of the quad-cluster.
   With a $t_0$ truncation, we no longer have the non-positivity results
   from Section~8.  (The quoins give a positive contribution.) However,
   I have checked that
   the estimate on $\Delta(v,W)$ is sufficiently small that we still
   obtain a constant less than $-1.04\,\operatorname{pt}$.
   

[p.116][p.121] Definition~11.7 allows masked
flat in definition of $3$-unconfined.
Definition~11.24 requires no masked flats
in the same definition.  FIX: Use Definition~11.24 (no masked flats).  Where masked flats occur,
treat them with Lemma~11.23, parts (1) and (2).

[p.116,\line+1] 
	$$
	\text{Lemma}~4.16 \to \text{Lemma}~4.17
	$$
At any rate, the lemma is not being applied
precisely, nor was I trying to.

[p.117,before Lemma~11.9]
	$$
	\text{two others} \to \text{three others}
	$$
	
[p.117,Def~11.8]
    $$
    y1 \to y_1
    $$
    
 
[p.119,Definition~11.5]  By definition, we require a masked flat quarter to
be a strict quarter. 
	
[p.121] See p.116.

[p.121,\line-5]
	$$
	0.2274 \to 0.02274
	$$
	
[p.123. flat case (2)]  It is missing
isolated quarters cut from the side.
FIX: In condition 2(f), 
	$$
	\eta_{456}\ge\sqrt2 \to
	\eta_{456}\ge\sqrt2 \text{ or } \eta_{234}\ge\sqrt2.
	$$
	
[p.124] See p.73.
	
[p.126]  Theorem~12.1 needs to be stated in
a form that allows the application in pp.251-252
and Lemma~13.5.  In these applications, the
regions are smaller than standard regions.
Yet in the statement of the theorem, the regions
are standard regions.  This is not a problem
in practice, because the proof is at a much
finer level of decomposition than standard regions.
However, the wording needs to be changed so
that the theorem applies precisely.

[p.126] 
In Theorem~12.1, there is the restriction
	$5\le n\le 8$.
But in some applications of the theorem to
linear programming, the constraints on $n$
are   $$3\le n\le 8$$
with	$$\sigma_R(D)\le s_n$$
and with $s_3 = 1\,\op{pt}$ and $s_4=0$.
Similarly, when $n(R)=3$,
	$$\tau_R(D) \ge t_3 = 0.$$
(Thanks to S. Obua.)

[p.131]
In Section~12.7, the argument in the first two
paragraphs about reducing to a polygon is incomplete, because it doesn't show that the deformation can be done in such a way that the distances remain at least $2$.  (The Remark~12.7 about this issue only applies to the subsequent 
deformations.  This is a serious issue that requires an extended explanation.

To make sure that there are no problems with the deformation,
I need to repeat a number of estimates from DCG, sometimes with
a minor variation.  (I am currently preparing the Blueprint
Version of the proof of Kepler, and some of what I write here
includes improvements made for that version.)  A few of
these need new interval arithmetic calculations.  I am
do not have access to interval arithmetic code right now, so for the moment these remain hypotheses.


If we only use distinguished edges of length
at most $2.91$, no problems arise.  This is
because geometric considerations give
  $$E(2,2,2,2.51,2,2.51,2,2,2) > 2.91.$$
However, this does not solve the problem, because
loops are allowed to have edges of length as
great as $3.2$.

This issue does not occur in the proof of the dodecahedral conjecture.  There we can start with edges of length up to length $2.91$, and make the deformations described in Section~12.7.  After deformations have made each subregion into a simple polygon, the edges can be extended out to $3.2$, and the argument continues as before.

The problem is with loops which have an anchored simplex with an edge in the range $[2.91,3.2]$.  To fix the problem, we need to be much more aggressive 
in expunging upright quarters.  Thus, we need to revisit earlier sections of the text that erase upright quarters.

Before we get into this too far, I want to clean up the presentation in the published proof.  When the upright quarters do not mask any flat quarters, then we follow the terminology of the published proof for what it means to erase upright quarters.  When the anchored simplices around an upright diagonal mask flat quarters $Q_1,\ldots,Q_r$, then we say that we can {\it expunge} the anchored simplices $S_1,\ldots,S_k$ with penalty $\pi_0$, if 
  $$
  \sum_{i=0}^k \sigma^*(S_i) - 4\delta_{oct}\op{vol}(\delta_P(v))
  < \pi_0 + \sum_{i=0}^k \op{s-vor}_0(S_i)
   +\sum_{i=0}^r (\op{mask}(Q_i) - \op{s-vor}_0(Q_i)).
  $$
We take $\sigma^*(S)$ to be $\sigma(S)$ when $S$ is an upright quarter; $\sigma(V_S(t_S))$ when it is a simplex of type $C$; and $\op{s-vor}_0(S)$ otherwise.
Here $\op{mask}(Q)$ is the max of the following functions on
various domains (compare $\hat\sigma$ defined in Sec~11.10):
  $$
  \op{mask} = \max
  \begin{cases}
  \Gamma,   & \eta_{234},\eta_{456}\le \sqrt2\\
  \op{s-vor}, & \eta_{234}\ge \sqrt2\\
  \op{s-vor}_0 - 0.0063, & y_4\ge 2.6, y_1\ge 2.2\\
  \op{s-vor}_0 - 0.0114, & y_4 \ge 2.7\\
  \op{bound}_{456}, & \eta_{456}\ge \sqrt2.\\
  \end{cases}
  $$
where
  $$
  \op{bound}_{456}(Q) = \min
  \begin{cases}
  \op{s-vor}_0(Q) &\\
  Z(3,1) &\\
  \op{sol}(Q)\zeta\,\op{pt} - D(3,1).&\\
  \end{cases}
  $$
The function $\op{mask}(Q)$ assembles all the the estimates ever used
on a masked flat quarter.
When we merely erase rather than expunge, the sum over $r$ is absent. Compare p.112, Section~11.1.
If there are no masked flat quarters,  there is no distinction between erasing and expunging.   In general, we try to expunge rather than just erase.

{\it We can always expunge $3$-crowded configurations.}  
(I don't know if this is needed for the correction, but
it simplifies the proof, so I will go ahead and introduce it.)
To expunge,
we need a new inequality for upright quarters of compression type:
   $$
   \Gamma(S) < \op{octavor}_0(S) + 0.5\,\op{dih}(S) - 0.54125.
   \qquad \text{\sc(HYPOTHESIS)}
   $$
Case 1: Assume first that there is no masked quarter.
When all three upright quarters have compression type, we use
$\sum_{(3)} \op{dih}(S) \le \pi$ to get
   $$\sum_{(3)}(\sigma-\op{vor}_0) < 
      [0.5\pi - 3 (0.54125)] < 0.$$
When one of the three uprights has Voronoi type, we use
  $$\sum_{(3)}(\sigma - \op{vor}_0 ) <
    (0.5(\pi - 0.956_{\text{dih min}}) - 2(0.54125)) 
    - 0.02274_{\kappa}
    + \xi_V < 0.$$
When two or three uprights have Voronoi type, then we use
   $$\sum_{(3)}(\sigma - \op{vor}_0 ) <
   \xi_\Gamma + 2\xi_V -0.02274 < 0.$$
Case 2: Assume that there is masked flat quarter.  Then there
is exactly one and the upright diagonal is not enclosed over it.
The proof of Lemma~11.23 (page 121) applies to this situation
to show that we can expunge the $3$-crowded upright diagonal.

Note that by expunging the $3$-crowded upright diagonal, we
no longer need the argument of page 117 that follows the statement of Lemma~11.9.  Also, Lemma~11.12 is no longer needed on page 118.
In particular, the interval calculations 855294746 that use truncation at $\sqrt2$ are no longer needed.  We no longer
need Lemma~11.10 that states all the anchored simplices are
quarters.

{\it We can always expunge an upright diagonal that is enclosed
over a masked flat quarter in an exceptional region, except possibly a loop with three quarters and one other anchored simplex with $y_4\in (2.51,2.91)$.}  (Since one of the cases of
the function $\op{mask}(Q)$ is $\op{s-vor}_0$, when
$\eta_{456}\ge\sqrt2$, in this situation there is no difference between erasing and expunging.) Let $\{0,v\}$ be the upright
diagonal.  Let $\{0,v_1,v_2,v_3\}$ be the flat quarter, with
diagonal $\{v_1,v_3\}$.  If $|v-v_2|>2t_0$, then geometric
considerations show that the upright diagonal is not in the
$Q$-system.  (It is part of an isolated quarter, or inside
a quad.)  So we have $|v-v_2|\le 2t_0$.  We are in the situation of
$\op{bound}_{456}$ ($\eta_{456}\ge0$).  
Lemma~11.27 (page 124) and the estimates
of Inequality~13.1 (page 147) and~13.2 (page 148)
prove the the two upright quarters with anchor $v_2$ can
be erased.  In the case that there are three anchors to the upright diagonal, the proof is now complete.  In the remaining case, by Corollary~11.25, 11.17, there are four anchors, forming a loop (with four anchored simplices).  Moreover, at least three of the anchored simplices are upright quarters.  We use the following
calculation: if an anchored simplex has $y_4\in [2.91,3.2]$, then
\begin{equation}\label{eqn:0201}
 \kappa < -0.0201\qquad\text{(HYPOTHESIS)}.
\end{equation}
If an anchored simplex
in the loop has $y_4> 2.91$, then we expunge the two upright quarters with anchor $v_2$ as described above. The third quarter and
anchored simplex give
  $\xi_V - 0.0201_\kappa < 0$.
Also, the ``masked''
anchored simplex $S=\{0,v,v_1,v_3\}$ satisfies $\op{s-vor}_0(S) <0$
(because there are no quoins and $\phi(1,t_0)<0$).
Hence the upright diagonal can be expunged.

{\it We can always expunge in the cases with fewer than for or more than five anchors.}  Expunge context $(2,1)$ as in Section~11.2.  Expunge contexts $(3,1)$ and $(3,2)$
as in Section~11.3 (or Lemma~11.26 if there is a masked flat
quarter).  Section~11.4 shows that six or more anchors do not
occur in a contravening star.  

We review the results on five anchors. 
Lemmas~11.4, 11.5 show that in the five anchored situation there is at most one large gap in a contravening star.  When there is one large gap (Lemma~11.18), the four anchored simplices are all upright quarters. If the five anchors form a loop, the parameters are $(n,k)=(5,0)$ or $(5,1)$.  (The proof that we are over target in cases $(5,\ge2)$ relies on drawing an edge of length up to length $3.2$.  However, since this immediately puts the figure over target, so that the deformation argument is not needed, and there is no need to restrict to lengths $\le 2.91$.) Also, in the case $(5,0)$, the standard region is a polygon to begin with and no deformation is required.  Thus, the only two cases in which the deformation argument is relevant are one large gap (OLGA5) and a loop (L51) with parameters $(5,1)$.

(OLGA5) When there is one large gap five anchors, we have estimates of the score and squander
from Lemmas~11.18 and Lemmas~11.19.  In particular, the material from the upright diagonal squanders at least 
  $$(0.4 + 0.02274) > \op{squander-target}/2.$$  We can expunge with penalty
  $$\max \left(\begin{array}{lll}
  3\xi_\Gamma + \xi_{\kappa,\Gamma}\\
  2\xi_\Gamma + 0.0114 - 0.02274_\kappa\\
  2 (0.0114) - 0.02274_\kappa\\
  \end{array}
   \right)\le 0.03344 < 3\xi_\Gamma.$$
  
(L51) When there is a loop $(n,k)=(5,1)$, 
the material from the loop satisfies by the table
of page 155
  $$
  \tau > 0.5941 > \op{squander-target}/2,\quad \sigma < -0.376.
  $$
When the upright diagonal has height $h$, and there exists an anchored simplex
with $y_4 > 2.91$, we can expunge with penalty
  $$
  \begin{cases}
  2 \max(2\xi'_\Gamma,0.0114+2\xi_V) < 3\xi_\Gamma, & h \ge 2.57\\
  2 \max(2\xi_\Gamma,0.0114+2\xi_V) - 0.0201_\kappa < 3 \xi_\Gamma, & h < 2.57\\
  \end{cases}
  $$
Write L51e for a loop 51 with some $y_4 > 2.91$ and L51s, otherwise.

We review four anchors.
Lemma~11.21 treats two large gaps.  If there is one large gap and a masked flat, then it can be expunged (Lemma~11.23).  If there
is no masked flat (OLGA4), 
the anchored simplices can be erased with penalty $0.008$ (or even $0.0022$ if some anchored simplex is not a quarter) by Lemma~11.23.  For loops, the context $(n,k)=(4,0)$
is not relevant for deformation, because it is a quad cluster.  This leaves contexts $(4,1)$, $(4,2)$, $(4,3)$, described on page 155. 

(L43) We can expunge an $(n,k)=(4,3)$ loop if there is an anchored simplex with $y_4\ge 2.91$.  (There is no masked quarter and no distinction between erasing and expunging.)  We use Equation~\ref{eqn:0201} and $\xi_\Gamma - 0.0201 < 0$.  So on a $(4,3)$ loop we may assume that the anchored simplices satisfy $y_4 < 2.91$.

(L42) Consider an $(n,k)=(4,2)$ loop when there is an anchored simplex with $y_4\ge 2.91$.  
If there is a masked flat (wlog we can take the diagonal not to be enclosed, since we have treated enclosed already),  we can expunge the diagonal $2\xi_V - 0.0201_\kappa < \min(-0.0063,-0.0114)$.  If the height of the diagonal satisfies $y_1\ge 2.57$, we can erase: $2\xi_V - 0.0201_\kappa < 0$.  We introduce the following
hypothesis on anchored simplices with $y_1 \le 2.57$ and $y_4 \ge 2.91$:
  \begin{equation}
  \kappa(S) < - 0.022\qquad\text{(HYPOTHESIS)}
  \end{equation}
Also, if $2.57\le y_1\le\sqrt8$ and $y_4\ge 2.91$, then
  \begin{equation}
  \kappa(S) < - 0.03\qquad\text{(HYPOTHESIS)}
  \end{equation}
(These are stronger inequalities than the hypthesis Equation~\ref{eqn:0201} mentioned earlier, so a separate proof of the earlier inequality is not needed.)
Then the material squandered around the loop is, by the chart of page 155, at least 
  $$
  0.3992 + 0.022_\kappa > \op{squander-target}/2.
  $$
We can expunge with penalty $\max(2\xi_\Gamma,0.0114+2\xi_V)$.
Write L42s for a loop 42 such that all $y_4\le 2.91$ and $L42e$ for a loop
42 such that some $y_4>2.91$.

  
(L41) Consider an $(n,k)=(4,1)$ loop when there is an anchored simplex with $y_4\ge 2.91$ and the upright diagonal has height at least $2.57$.  If there is a masked
flat quarter, we may assume that the diagonal is not enclosed (that case
has been treated above).  It can be expunged: $$-0.03_\kappa + \xi'_\Gamma + 2\xi_V < \min(-0.0063,-0.0114).$$  If there is no masked flat quarter, it can
still be expunged (erased):  $3\xi'_\Gamma - 0.03_\kappa < 0$.  What remains are loops L41 with $y_4\le 2.91$ or diagonal height at most $2.57$.

There is at most one of OLGA5, L51e, L42e because any two add up to more
than the squander target.  We can expunge the OLGA5, L51e, or L42e together
with all the OLGA4's with penalty at most $\pi_{max}=0.06688$ (Lemma~12.6 continues
to hold in this slightly modified situation.)  When we expunge all this,
we are only left with loops such that every $y_4\le 2.91$ (call these constricted loops) and with loops L41
with diagonal height at most 2.57.  (Call these L41e257.)  We subdivide the subregions first with
distinguished edges of length at most $2\sqrt2$, then out to $2.91$ (provided
that it doesn't form a special simplex and provided the edge doesn't cross another distinguished edge).  Doing this separates off all the
constricted loops.  

As in DCG, we work with a single standard region, 
removing all vertices and edges
external to the region.

It is in this setting that we finally apply the reduction to polygon argument of
Section~12.7.  The deformation should move rigidly all the anchored simplices around each L41e257.  
The stopping condition for the deformations is any of the three
following.  (A) A new edge develops of length $\le2.91$ between two vertices
of height $\le 2.51$ such that (a1) does not cross any other such edge or anchor and such that (a2) is not a special diagonal.  (B) An upright diagonal in a L41e257 acquires a new anchor
(with distance exactly $2t_0$ to the top of the diagonal).  (C) The distance
between tops of upright diagonals becomes $2$.  In general, there
may be several connected components of the boundary of the subregion.
When a stopping condition brings two components together, other deformation is carried out bringing other components components together until stopping
conditions are reached for each component.  Similar remarks apply
to single components whose boundaries are not simple.


{\it We claim edges of types $A,B,C$ do not cross.}
The proof goes as follows.
By assumption edges of type $A$ do not cross one another.
There is no $CC$, $BC$, or $BB$ crossing by geometric considerations:
   $$
   \begin{array}{lll}
   \mc{E}(2,2,2,2.57,2.57,2,2,2,2) &> 2.86 > \sqrt8.\\
   \mc{E}(2,2,2,2.57,2.51,2.51,2,2,2) &> 2.73 > 2.51.\\
   \end{array}
   $$
An $A$ edge does not cross over a $B$ or $C$ edge by geometric considerations:
   $$
   \mc{E}(2,2,2,2.51,2.91,2.51,2,2,2) > 2.51.
   $$
In a crossing of an edge of type $A$ under an edge of type $C$, we
may assume that some endpoint of the $A$-edge has distance at least $2.51$
from some endpoint of the $C$-edge.  (Otherwise, the stopping condition
is already met with $B$-edges before the $A$-edge had a chance to form.)
This $AC$-crossing cannot form by geometric considerations:
   $$
   \mc{E}(2,2,2,2.57,2.57,2,2.51,2,2) > 2.91.
   $$
Similar remarks apply for an $A$ under $B$ crossing.  We may assume that
the distance from the anchor to an endpoint of $A$ is at least $\sqrt8$
or that the distance from the top of the upright diagonal to $A$ is
at least $2.51$.  Otherwise the stopping conditions prevent the formation.
We have
   $$
   \begin{array}{lll}
   \mc{E}(2,2,2,2.57,2.51,2.51,\sqrt8,2,2) > 2.91\\
   \mc{E}(2,2,2,2.57,2.51,2.51,2,2.51,2) > 2.91\\
   \end{array}
   $$
This completes the proof of the claim.

Recall that by Corollary~11.6, a vertex of height at most $2t_0$ is
never enclosed over an anchored simplex.  We can also assert that
a vertex of height at most $2.57$ is never enclosed over an anchored
simplex.  In fact, if this occurs, in view of what has been expunged,
the vertex is part of a L41e257.  In view of the results on the non-crossing
of edges, an anchor of that loop  would also be enclosed over the
anchored simplex, which is impossible by Corollary~11.6.

{\it We claim that the stopping condition with type
$B$ edges never occurs.}  Let $\{0,v\}$ be the upright diagonal, and let $\{v_1,\ldots,v_4\}$ be the anchors.  let $v_0$ be a new anchor that forms, say between $v_1$ and $v_4$.  If $|v_0-v_1|< 3.2$ and $|v_0-v_4|<3.2$, then we have distinguished edges $\{v_0,v_1\}$ and $\{v_0,v_4\}$.  This makes $v_0$ rigidly attached to the other anchors, so that the deformation cannot have occurred.  Thus, we may assume that $|v_0-v_1|\ge 3.2$.  This is an impossible geometric situation.  In fact, geometric considerations show we cannot simultaneously have
  $$
  \op{dih}(0,v,v_1,v_0) + \op{dih}(0,v,v_0,v_4)\le\pi
  $$
and $\{v_4,v_1\}$ has length at most $3.2$ and passes through $\{0,v,v_0\}$ (HYPOTHESIS).


{\it We claim that the stopping condition with type $C$ edges never
occurs.}  Assume to the contrary that such an edge forms.
Let $\{0,v\}$ and $\{0,w\}$ be the upright diagonals of height at most
$2.57$.  let $v_1,\ldots,v_r$ be the anchors of $\{0,v\}$.  By argument on $B$-edges in the previous
paragraph, we may assume that $r=4$, the number of anchors in a L41e257 loop.  Order the anchors so
that the edge $C$ between $v$ and $w$ appears
between $v_1$ and $v_4$.  We claim that the
conditions $|w-v_1|\ge 2.51$ and $|w-v_4|\ge 2.51$ cannot
both hold for geometric conditions.
Otherwise we have a configuration $\{0,v,w,v_1,v_4\}$ with the edge $\{v_1,v_4\}$ passing through $\{0,v,w\}$ and $|v_1-v_4|\le 3.2$.  Geometric considerations show that this cannot happen.  At the other extreme, if $|w-v_1|<2.51$ and $|w-v_4|<2.51$, then $v_1,v_4$ are anchors of $w$.  This is a rigid situation that could not have been deformed; so it never arises.  

Thus, we have (say) $|w-v_1|<2.51$ and $|w-v_4|\ge 2.51$.  Let $w_4$ be the anchor of $w$ following $v_1$ in the cyclic order around $w$.
We have a configuration of six point $\{0,v,w,v_1,v_4,w_4\}$.  The edges $\{v_1,v_4\}$ and $\{v_1,w_4\}$ pass through $\{0,v,w\}$ and have length at most $3.2$.  If the distance $|v_4-w_4|<\sqrt8$, then we have a distinguished edge $(v_4,w_4)$.  This creates a rigid configuration that admits no deformation.  So it could not have occurred.  We may assume that $|v_4-w_4|\ge 3.2$.  Then a calculation shows $\op{dih}(0,v_1,w_4,v_4) > 1.2$ (HYPOTHESIS).    Another calculation shows that
$\op{dih}(0,v_1,w,v) < 1.2$ (HYPOTHESIS).  However, this is a contradiction, because
  $$
  \op{dih}(0,v_1,w,v)+\op{dih}(0,v_1,w_4) + \op{dih}(0,v_1,v,v_4) = \op{dih}(0,v,v_4,w_4).
  $$
This completes the proof that the $C$ edge cannot form.

Thus, deformation only creates new $A$ edges.  We continue deformations until each polygon is simple.  Then we continue in DCG as before.  We add additional edges up to length $3.2$; break off L41e257 loops; and obtain estimates as in DCG.



[p.139,Lemma~12.18,proof,\line+3] 
	$$C_0(|v|,\pi) \to
	C_0^u(|v|,\pi)
	$$
	
[p.139,Lemma~12.18] The constant 2.2 of the
statement is not mentioned in the proof, except
in the first sentence of the proof.
	$$
	\tau_0(C_0^u(2t_0,\pi))-\pi_{\text{max}}\to
	\tau_0(C_0^u(2.2,\pi))-\pi_{\text{max}}
	$$
[This is what I believe it should be; I have
not rechecked the mathematical calculation.]

[p.144,\line+11,\line+17]
	$$2t_0^2 \to (2t_0)^2
	$$


[p.146] The last symbol $S_n^\pm$ in the
sentence before the start of 
Section~13.5 is undefined.
	$$\begin{array}{lll}
	S_n^\pm \to&\\
	\text{of 3-crowded, 3-undefined, and
	4-crowded combinations} 
	\end{array}
	$$
	
[p.148,Sect. 13.6]  This entire
section is misplaced.  It belongs with
Sections 25.5 and 25.6 much later.

[p.149,before 13.7]
	$$
	\text{the diagrams}\to
	\text{Figs~25.1--25.4}
	$$
	
[p.149] $\delta_{loop}$ is not defined.

[p.156] $\delta_{loop}$ is not defined.

[p.156,Lemma~13.5,\line+4]
	$$
	\begin{array}{lll}
	\text{respectively for }\tau_R(D)\to\\
	\text{respectively, for }\sigma_R(D) \text{ and }
	\tau_R(D),  
	\end{array}
	$$
	
[p.164,\line-1] 
	$$
	\begin{array}{lll}
	\text{This shows }\ldots \text{ occur.}\\
	\text{This completes the proof.}
	\end{array}
	$$
	
[p.182,Lemma~16.7]  I do not understand why
the bound holds on each half.  It seems that
the deomposition into the halves might not be
compatible with the geometry: cone or quoin
terms might ``cross over'' into the other half.
At any rate, it is not a direct consequence
of Theorem~8.4.

Proposed fix: Show by an interval arithmetic
calculation that each side separately satisfies
that bound $0.04\,\text{pt}$. (I'm making up
a number here.  This is just an educated guess.)
Then restrict to halves whose score exceeds
$-1\,\text{pt}$.

[p.241]  `Mixed' is defined so as to include
the pure analytic case.  In earlier papers,
`mixed' excludes the pure analytic.  
	$$
	\text{mixed}\to\text{mixed or pure}
	$$
	
[p.243,\line+13,\line+14,\line+15]
	Delete three sentences:
	`Let $v_{12}$ be $\ldots$  We let $\ldots$
	 Break the pentagon $\ldots$'
	
[p.248,last displayed formula]  
	$$
	= \to +
	$$
so that it reads
	$$
	\sum_i f_{R_i}(D) \le \hat\sigma(Q_i) +
	\op{vor}_{R',0}(D) + \pi_R
	$$

[p.252,Sec.~25.7,Cases~2 and 3]  `The flat quarter'
is mentioned, but there are no flat quarters
that have been introduced into the context.  
It seems that this passage
has been moved by a cut-and-paste edit to a
place it does not belong.

[p.254,\line+7]
	$$
	\text{to branch combine} \to \text{to combine}
	$$




\section{Index}

The index should have additional entries.
\begin{itemize}
	\item [p.128] distinguished edge
	\item [p.128] special
\end{itemize}

\section{Code}

\subsection{Mathematica Code}

The Mathematica code at the Annals website
(http://annals.math.princeton.edu/keplerconjecture/sphere.txt) needs to be updated.

[sphere.txt,global]
The function $\op{Norm}$ defined in sphere.txt
has become a Mathematica built-in function.
We need to rename our function: 
	$$\op{Norm} \to \op{norm}$$
	
[sphere.txt,\line+262]
The file {\it more.m} is not part of the distribution:
	$$\ll \op{more.m} \to \op{(* -- *)}$$



Please report further errors to
Thomas C. Hales.\footnote{Version: \ver}


\begin{thebibliography}{}

%% References
\bibitem{A} {T. Hales}, A proof of the Kepler
	conjecture, Annals of Mathematics,
	2006.
	
\bibitem{DCG} {S. Feguson and T. Hales},
	The Kepler Conjecture, Disc. and Comput.
	Geom. 36 (1), July 2006.


\end{thebibliography}







\end{document}
